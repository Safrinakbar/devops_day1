pipeline script

pipeline { 
agent any 
stages { 
stage('SCM') { 
steps { 
} 
git branch: 'main', url: 'https://github.com/Safrinakbar/DevOps.git' 
} 
stage('build') { 
steps { 
sh "mvn clean" 
sh "mvn install" 
} 
} stage('build to images') { 
steps { 
script{ 
sh 'docker build t safrinbaragna/devops.' 
} 
} 
} stage('push to hub') { 
steps { 
script{ 
withDockerRegistry (credentialsId: 'Docker_cred', url: 'https://index.docker.io/v1/') { 
sh 'docker push safrinbaragna/devops' 
} 
} 
} 
} stage('Deploy App') { 
steps {
stage('build') { 
steps { 
sh "mvn clean" 

sh "mvn install" 

} 

} 

steps [ 

tage('build to images') { 
script{ 

sh docker build -t safrinbaragna/devops. 

} } 
}  
stage('push to hub') { 
steps { 
script{ 
withDockerRegistry (credentialsId: 'Docker_cred', url: 'https://index.docker.io/v1/') { 
sh 'docker push safrinbaragna/devops' 
}  
stage('Deploy App') { 
steps [ 
withKubeConfig(caCertificate:", clusterName: 'minikube', contextName: 'minikube', credential 
sh 'kubectl apply f deployment.yml-validate=false' 
 } 
}  
} 
} 